var aniData,malid,tab;document.addEventListener("DOMContentLoaded",(function(){var e=performance.now();if(console.log("Loading app data..."),malid=Number(window.location.pathname.split("/")[2]),isNaN(malid)||malid<1)shownotif("404 Not Found",5e3);else if(9999901!==malid)if(9999902!==malid)if(9999903!==malid)if(9999904!==malid)if(malid>9999904)shownotif("This show not have anime data",5e4);else{gID("loadcontainer").style.display="block",tab=getrequest("tab");var t=window.location.href;if(window.history.replaceState("a",document.title,window.location.pathname),t.includes("refresh"))requestNew(malid,!0);else{var a=new XMLHttpRequest;a.open("GET",`/assets/mal/${malid}.json`),a.timeout=15e3,a.onloadend=function(){200===this.status?(aniData=JSON.parse(a.responseText),dataLoaded()):404===this.status?requestNew(malid):shownotif('Network error<br><a href="?reload">Retry</a>',5e4);var t=performance.now();console.log("%c Data loaded in : "+(t-e)+"ms","background: #222; color: #7eff4f"),gID("loadcontainer").style.display="none"},a.send()}gID("q").addEventListener("keyup",(e=>{"Enter"===e.key&&gID("searchbutton").click()}));var n=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get(){n={passive:!0}}}))}catch(e){}if("ontouchstart"in window&&(document.addEventListener("touchstart",handleTouchStart,n),document.addEventListener("touchmove",handleTouchMove,n)),gID("enablechat").addEventListener("click",(function(){gID("enablechat").checked&&discordNotOpened?shownotif("This feature already deprecated"):shownotif("Chat closed")})),!isMobile()){var i=window.document.createElement("div");i.id="backtotopbtn",i.addEventListener("click",scrollToTop),i.style.opacity="0",i.innerHTML='<i class="glyphicon glyphicon-menu-up"></i>',document.body.appendChild(i);var o=!0;document.addEventListener("scroll",(function(){window.scrollY>50&&o?(o=!1,i.style.opacity="1"):window.scrollY<50&&!o&&(o=!0,i.style.opacity="0")}))}}else shownotif("Castlevania not have anime data",5e4);else location.href="/settings/";else shownotif("Avatar not have anime data",5e4);else shownotif("RWBY not have anime data",5e4)}));var circleHTML='<div style="text-align:center;margin-top:75px"><svg class="spinner" width="75px" height="75px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">\n<circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>\n</svg><br><br>Loading...</div>';function randomSend(e,t=.1){if(!(Math.random()>t||null==malid)){var a=new XMLHttpRequest;a.open("POST","/api/search"),a.timeout=15e3,a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(e)}}function requestNew(e,t=!1){var a="";t&&(a="&genupdate=y");var n=new XMLHttpRequest;n.open("POST","/api/search"),n.timeout=15e3,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onloadend=function(){200===this.status?loadNew(e):shownotif("404 Not Found",5e4)},n.send("malgen="+e+a)}function loadNew(e){var t=new XMLHttpRequest;t.open("GET",`/assets/mal/${e}.json?`+Math.floor(100*Math.random())),t.timeout=1e4,t.onloadend=function(){200===this.status?(aniData=JSON.parse(t.responseText),dataLoaded()):shownotif('Network error<br><a href="?reload">Retry</a>',5e4),gID("loadcontainer").style.display="none"},t.send()}function imgerror(e){e.onerror=null;var t=new XMLHttpRequest;t.open("POST","/api/search"),t.timeout=15e3,t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onload=function(){if(200===this.status){var t=e.src+"?"+Math.floor(1e3*Math.random());gID("topcoverimage").src=t,gID("maincoverimage").src=t}},t.send("malgen="+malid+"&imgonly=y")}var isLoaded=!1;function dataLoaded(){if(aniData.image_url.includes("images/anime"))var e="https://cdn.animixplay.to/min/mal"+aniData.image_url.split("images/anime")[1];else e=aniData.image_url;var t='<a href="https://myanimelist.net/anime/'+malid+'" target="_blank" rel="noreferrer">MAL</a>';document.title=aniData.title+" - AniMixPlay",gID("topcoverimage").src=e,gID("animepagetitle").innerHTML=aniData.title;var a=gID("maincoverimage");a.src=e,a.addEventListener("click",showPictures),a.style.cursor="pointer",null===(synopsis=aniData.synopsis)?synopsis="None":-1!==synopsis.indexOf("MAL Rewrite")&&(synopsis=synopsis.replace("MAL Rewrite",t+" Rewrite")),gID("panelplace").innerHTML=synopsis,null===aniData.score?aniData.score="not rated yet":"number"==typeof aniData.score&&(aniData.score=aniData.score.toFixed(2));var n=aniData.url.split("anime/")[1];!1===window.location.pathname.includes(n)&&window.history.replaceState("a",document.title,"/anime/"+n);var i="";null!=aniData.title_english&&(i+=aniData.title_english+"<br>"),null!=aniData.title_japanese&&(i+=aniData.title_japanese);for(var o=aniData.title_synonyms.length,r=0;r<o;r++)i+="<br>"+aniData.title_synonyms[r];isMobile()&&(i='<i class="glyphicon glyphicon-globe"></i> '+aniData.title+'<br><span style="color:#a6a6a6">'+i+"</span>");var s=gID("addTitle");s.innerHTML=i,s.addEventListener("click",(function(){"unset"!==s.style.textOverflow&&(s.style.overflowX="auto",s.style.textOverflow="unset")})),document.addEventListener("click",(function(e){"addTitle"!==e.target.id&&(s.style.overflowX="",s.style.textOverflow="")}));var l=aniData.genres;void 0!==aniData.themes&&(l=l.concat(aniData.themes,aniData.explicit_genres,aniData.demographics)),l.forEach((function(e,t,a){var n={"Romantic Subtext":"Romance","Otaku Culture":"Otaku","Strategy Game":"Game","Video Game":"Game","High Stakes Game":"Game","Idols (Female)":"Idols-Female","Idols (Male)":"Idols-Male",Detective:"Police","Reverse Harem":"Harem",Workplace:"Work"},i=e.name;void 0!==n[i]&&(i=n[i]),a[t]="<a href='/?genre="+i+"'>"+e.name+"</a>"}));var d="Genres : "+l.join(", ");[40839,42963,43969,40530,34403,34881,16742].includes(malid)&&(d+=", <a href='/?genre=Cringe'>Cringe</a>"),isMobile()||(gID("genres").innerHTML=d),null==aniData.episodes&&(aniData.episodes="Unknown");var c,p="";for(r=0;r<aniData.studios.length;r++)r>0&&(p+=", "),p+=aniData.studios[r].name;for(var u in adaptedName=aniData.title,aniData.related)if("Adaptation"!==u){related+=u+": ",c=aniData.related[u];for(r=0;r<c.length;r++)related+=`<br>- <a href="/anime/${c[r].mal_id}">${c[r].name}</a>`;related+="<br><br>"}else void 0!==aniData.related[u][0]&&(adaptedName=aniData.related[u][0].name,adaptID=aniData.related[u][0].mal_id);var m=aniData.source;m.includes("anga")&&(m='<a style="cursor:pointer" onClick="showSourceSel()"><img src="https://cdn.animixplay.to/s/fav/mangar.png" style="margin-top:-5px"> '+m+"</a>"),m.includes("ovel")&&0!==adaptID&&(m='<a style="cursor:pointer" onClick="showSourceSel()">'+m+"</a>");var h=`\n    Score: <i class="glyphicon glyphicon-star" style="color:#ffd530e8;"></i> ${aniData.score}<br>\n    Episodes: ${aniData.episodes} ${aniData.type}<br>\n    Status: ${aniData.status}<br>\n    Aired: ${aniData.aired.string}<br>\n    Popularity: ${addCommas(aniData.members)} <span style="color: #8c8c8c;">#${aniData.popularity}</span><br>`;if(isMobile()&&(h+=d+"<br>"),aniData.rating||(aniData.rating="None"),h+=`Rating: ${aniData.rating}<br>\n    Duration: ${aniData.duration}<br>\n    Source: ${m}<br>\n    Studios: ${p}<br>\n    More info: ${t}, <a href="/alredirect.html#${malid}" target="_blank">AL</a>, <a href="/dbredirect.html#${malid}" target="_blank">AniDB</a>`,gID("addInfo").innerHTML=h,(null==aniData.trailer_url||aniData.trailer_url.length<5)&&gID("traillerbtn").remove(),related=""===related?"None":'<span style="background-color:#444;padding:1px 5px;">Series List:</span><br>- <a id="serieslink" href="/series/'+malid+'?mode=new"> Full Release Order <i class="glyphicon glyphicon-share"></i></a><br><br>'+related,gClass("subtitleright")[0].innerHTML='Information <a href="?refresh"><i class="glyphicon glyphicon-repeat animerefbtn"></i></a>',gID("rightsideanimepage").style.display="block",gID("disquscomment").style.display="block",isMobile()&&expandinfo(),window.innerWidth<1e3){var g=gID("sharebtn");g.style.cssText="display:block;position:absolute;border-radius:3px;left:275px;top:167px;border:1px solid #404040;min-width:93px;padding:4px 16px;font-size:14px;background-color:#282828;color:#9bc6ec;",g.addEventListener("click",(function(){navigator.share?navigator.share({title:document.title,url:window.location.href}):(copyToClipboard(window.location.href),shownotif("URL copied to clipboard"))}))}handleAiring(),isLoaded=!0,"related"===tab?showrelated():"similar"===tab?showrecomendation():"songs"===tab?showsong():"trailer"===tab&&showtrailler();var f=document,v=f.createElement("script");v.src="https://animixplay.disqus.com/count-data.js?1="+window.location.pathname,(f.head||f.body).appendChild(v),randomSend("malgen="+malid+"&genupdate=y")}var synopsis="",recomendation="",related="",trailler="",song="";function showsynopsis(){isLoaded&&(window.history.replaceState("a",document.title,window.location.pathname),document.querySelector(".active").classList.remove("active"),gID("synopbtn").className="active",""==synopsis&&(synopsis=aniData.synopsis),gID("panelplace").innerHTML=synopsis)}function showrecomendation(){if(isLoaded=!1,window.history.replaceState("a",document.title,window.location.pathname+"?tab=similar"),document.querySelector(".active").classList.remove("active"),gID("recombtn").className="active",""===recomendation){gID("panelplace").innerHTML=circleHTML;var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=".recreason{float:right;background-color:#202020;padding:2px 10px 2px 10px;border:1px solid #444;margin: 8px 8px 0 0;}.quickresult{border:none;padding:0}.name a{color:#a7ccea}.name a:hover{color:#d9eeff}.quickresult li{cursor:default}",document.head.appendChild(e);var t=new XMLHttpRequest;t.open("GET","/assets/similar/"+malid+".json"),t.timeout=3e4,t.onloadend=function(){if(200===this.status){var e,a,n,i=JSON.parse(t.responseText),o=i.recommendations.length;recomendation='<ul class="quickresult">';for(var r=0;r<o;r++)a=(e=i.recommendations[r]).url.split("/anime/")[1],n=1===e.recommendation_count?"user":"users",recomendation+=`<li>\n                    <a href="${e.recommendation_url}" target="_blank"><div class="recreason">?</div></a>\n                    <div class="searchimg"><a href="/anime/${a}" title="${e.title}">\n                        <img class="resultimg2" src="${e.image_url}"/></a>\n                    </div>\n                    <div class="details">\n                        <p class="name"><a href="/anime/${a}" title="${e.title}">${e.title}</a></p>\n                        <p class="infotext">${e.recommendation_count} ${n} suggest</p>\n                    </div>\n                    </li>`;recomendation+="</ul>",o<1&&(recomendation="No recommendation"),gID("panelplace").innerHTML=recomendation}else randomSend("simigen="+malid,1),gID("panelplace").innerHTML='Network error<br><br><a href="#" onClick="showrecomendation()">Retry</a>';isLoaded=!0},t.onerror=function(){isLoaded=!0},t.send(),randomSend("simigen="+malid+"&noreturn=true",.5)}else isLoaded=!0,gID("panelplace").innerHTML=recomendation}var seriesLoaded=!1;function showrelated(){if(isLoaded){if(window.history.replaceState("a",document.title,window.location.pathname+"?tab=related"),!seriesLoaded){seriesLoaded=!0,isLoaded=!1;var e=new XMLHttpRequest;e.open("GET","/assets/s/series.json"),e.timeout=1e4,e.onloadend=function(){if(isLoaded=!0,200===e.status){var t=JSON.parse(e.responseText);void 0!==t[malid]&&(gID("serieslink").setAttribute("href","/series/"+t[malid]+"?id="+malid),related=gID("panelplace").innerHTML)}},e.send()}document.querySelector(".active").classList.remove("active"),gID("relatebtn").className="active",gID("panelplace").innerHTML=related}}function showsong(){if(isLoaded){if(window.history.replaceState("a",document.title,window.location.pathname+"?tab=songs"),document.querySelector(".active").classList.remove("active"),gID("songbtn").className="active",""==song){if(song+="Opening Theme :<br>",aniData.opening_themes.length<1||aniData.opening_themes[0].includes("improve our data"))song+="None<br>";else for(var e=0;e<aniData.opening_themes.length;e++){var t=aniData.opening_themes[e];/[0-9]+:/.test(t)&&(t=t.substring(t.indexOf(":")+1));var a=t.replace(/\([^)]*\)|["#]/g,"").trim().replace(/[ ]{2,}/g," ");t=t.replace("(eps"," (eps"),song+=e+1+") "+t.trim()+' <a href="https://youtube.com/results?search_query='+encodeURIComponent(a)+'" target="_blank"><i class="glyphicon glyphicon-play"></i> Play</a><br>'}if(song+="<br>Ending Theme :<br>",aniData.ending_themes.length<1||aniData.ending_themes[0].includes("improve our data"))song+="None";else for(e=0;e<aniData.ending_themes.length;e++){var n=aniData.ending_themes[e];/[0-9]+:/.test(n)&&(n=n.substring(n.indexOf(":")+1));a=n.replace(/\([^)]*\)|["#]/g,"").trim().replace(/[ ]{2,}/g," ");n=n.replace("(eps"," (eps"),song+=e+1+") "+n.trim()+' <a href="https://youtube.com/results?search_query='+encodeURIComponent(a)+'" target="_blank"><i class="glyphicon glyphicon-play"></i> Play</a><br>'}}gID("panelplace").innerHTML=song}}function showtrailler(){if(isLoaded){if(window.history.replaceState("a",document.title,window.location.pathname+"?tab=trailer"),document.querySelector(".active").classList.remove("active"),gID("traillerbtn").className="active",""==trailler)if(null==aniData.trailer_url||aniData.trailer_url.length<5)trailler='<div id="trailcontainer">No Trailler available</div>';else{var e="https://plyr.link/yt/embed.html#"+aniData.trailer_url.split("?")[0].split("embed/")[1]+"?autoplay=1&rel=0";trailler=`<div id="trailcontainer"><iframe id="iframeanime" src="${e}" allowfullscreen="true"></iframe></div>`}gID("panelplace").innerHTML=trailler}}function showrecomend(){var e=gID("recomendedlist");setTimeout((function(){(""===e.innerHTML||e.innerHTML.includes("showrecomend()"))&&(e.innerHTML=circleHTML)}),400);var t=new XMLHttpRequest;t.open("POST","/api/search"),t.timeout=11e3,t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onloadend=function(){if(200===this.status){var a=JSON.parse(t.responseText);"object"==typeof a.data?(e.innerHTML=buildreclist(a.data),""!==defaultrecOpen&&gID("rec"+defaultrecOpen).children[0].children[1].click()):e.innerHTML=buildreclist([]),recomendloaded=!0}else e.innerHTML='<div style="text-align: center;">Network error<br><br><a href="#" onClick="showrecomend()">Retry</a></div>'},t.send("recomended="+malid)}var externalData,adaptedName,defaultrecOpen="";function buildreclist(e){for(var t,a,n,i="",o=!1,r=0;r<e.length;r++){var s="";r>0&&(s='style="opacity:0.5"'),i+='<div class="recomendedtitle" '+s+">"+e[r].type+' Stream</div> <div class="reclistcontainer" '+s+">";for(var l=0;l<e[r].items.length;l++)a=movedub((t=e[r].items[l]).title),n=t.url,""!==defaultrecOpen&&o||(defaultrecOpen=t.uid,a!==t.title&&0===r||(o=!0)),i+=`<div id="rec${t.uid}"><div class="recflexlist"><div class="imguserlist">\n              <a href="${n}">\n                <img class="imgusr" src="${t.img}">\n              </a>\n            </div><div class="detailuserlist" style="cursor:pointer" onClick="recEpShow('${t.uid}', '${t.url}', ${t.ep})">\n              <p class="reclisttitle">\n                <a href="${n}" title="${t.title}">\n                  ${a} </a>\n              </p>\n              <p class="watchprogress">${t.info}</p>\n              <p class="listviewcount">${t.views} views</p>\n            </div></div></div>`;i+="</div>"}return""===i&&(i+='<div class="loadmoresearch2" style="cursor: default;">no stream available yet</div>'),i+='<div id="extracontainer"><button id="showExternalBtn" onclick="showExternal()"><i class="glyphicon glyphicon-menu-down"></i> External Websites </button><div id="loadStatus"></div></div>'}function recEpShow(e,t,a=0){if("A"!==document.activeElement.tagName){var n=gID("rec"+e);if(void 0===notFoundID[n]){if(previousRecEp===e)return void(location.href=t);if(""!==previousRecEp){var i=gID("rec"+previousRecEp);i.style="";var o=i.children[1];void 0!==o&&o.remove(),previousRecEp=""}if(previousRecEp=e,n.style="border-left:3px solid #5baaff;padding-left:7px;margin-left:-10px;",a>1){var r="",s=!1,l=document.createElement("div");if(a>0){l.className="eprecgrid",a>18&&(s=!0);for(var d=!1,c=1;c<=a;c++)s&&c>12&&c<a-4?d||(d=!0,r+='<div style="text-align:center">...</div>'):r+='<a href="'+t+"/ep"+c+'">'+c+"</a>"}else r='<div style="font-size: 12px;color: gray;">no ep available yet</div>';l.innerHTML=r,n.appendChild(l)}}}}function showExternal(){if(!(malid>9999900))if(gID("showExternalBtn").style.display="none",gID("loadStatus").style.display="block",gID("loadStatus").innerHTML="<br><br><br>","Not yet aired"!==aniData.status)if(Math.random()<.5)requestNewExternal();else{var e=new XMLHttpRequest;e.open("GET",`/assets/rec/${malid}.json`),e.timeout=1e4,e.onloadend=function(){200===this.status?(externalData=JSON.parse(e.responseText),externalLoaded()):requestNewExternal()},e.send()}else gID("extracontainer").innerHTML='<div class="reclistcontainer"><br>This anime not yet aired</div>'}function externalLoaded(){var e,t,a,n='<div class="recomendedtitle">External Websites</div> <div class="reclistcontainer">';Object.keys(externalData).forEach((function(i){if("9anime"===(a=i.toLowerCase())){for(n+='<img src="https://cdn.animixplay.to/s/fav/9ani.png"> 9Anime<br>',e=externalData[i].length,t=0;t<e;t++)n+=`<a href="${externalData[i][t].url}" target="_blank">${movedub2(externalData[i][t].title)}</a><br>`;n+="<br>"}else if("gogoanime"===a){for(n+='<img src="https://cdn.animixplay.to/s/fav/gogo.png"> Gogoanime<br>',e=externalData[i].length,t=0;t<e;t++)n+=`<a href="${externalData[i][t].url}" target="_blank">${movedub2(externalData[i][t].title)}</a><br>`;n+="<br>"}else if("crunchyroll"===a){for(n+='<img src="https://cdn.animixplay.to/s/fav/cr.png"> Crunchyroll<br>',e=externalData[i].length,t=0;t<e;t++)n+=`<a href="${externalData[i][t].url}" target="_blank" rel="noreferrer">${movedub2(externalData[i][t].title)}</a><br>`;n+="<br>"}else if("yugenanime"===a){for(n+='<img src="https://cdn.animixplay.to/s/fav/yugen.png"> Yugen<br>',e=externalData[i].length,t=0;t<e;t++)n+=`<a href="${externalData[i][t].url}" target="_blank">${movedub2(externalData[i][t].title)}</a><br>`;n+="<br>"}else if("animepahe"===a){for(n+='<img src="https://cdn.animixplay.to/s/fav/pahe.png"> AnimePahe<br>',e=externalData[i].length,t=0;t<e;t++)n+=`<a href="${externalData[i][t].url}" target="_blank">${movedub2(externalData[i][t].title)}</a><br>`;n+="<br>"}})),n.length<90&&(n+="No stream found"),n+="</div>",gID("extracontainer").innerHTML=n}function requestNewExternal(){gID("loadStatus").innerHTML="Loading...";var e=new XMLHttpRequest;e.open("POST","/api/search"),e.timeout=1e4,e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onload=function(){externalData=200===this.status?JSON.parse(e.responseText):[],externalLoaded()},e.onerror=function(){gID("showExternalBtn").style.display="block",gID("loadStatus").innerHTML="Network error"},e.send("recgen="+malid)}function editStreams(){var e=gClass("recflexlist"),t=gID("moreinfobtn");if(t.setAttribute("onClick",""),t.style.cursor="default",t.style.opacity="0.5",void 0===notFoundClass.recflexlist){var a;t.innerHTML="Select below";for(var n=0;n<e.length;n++)a="This stream "+e[n].innerHTML.split('href="')[1].split('"')[0]+" is misplaced",e[n].innerHTML+=`<div style="float:right;margin-right:5px;cursor:pointer;">\n        <i class="glyphicon glyphicon-remove" style="color:#ff3a3a" onclick="reportError('${a}')"></i></div>`}else t.innerHTML="it's empty"}previousRecEp="";var adaptID=0,sourceSelLoaded=!1;function showSourceSel(){if(sourceSelLoaded){(e=gID("sourceSel")).style.display="block"}else{var e,t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML="#sourceSel{position:fixed;font-size:14px;width:100%;height:100%;z-index:21;top:0;color:white;padding-top:30vh;background-color:#0000008a;overflow-y:auto}.sourceSelSub{clear:both;width:calc(100% - 25px);max-width:400px;margin:0 auto;}.mangaThumb{width:80px;min-height:75px;float:left;margin:0 10px 10px 0;}.mangaReadBtn{color:white;background-color:#7b36ce;border:1px solid #9c63e1;padding:3px 20px;border-radius:3px}.mangaSubText{color:gray}",document.head.appendChild(t),(e=document.createElement("div")).setAttribute("id","sourceSel"),e.addEventListener("click",hideSourceSel),document.body.appendChild(e),sourceSelLoaded=!0}if("y"!==e.dataset.finish){if(e.innerHTML='<div style="text-align:center">Loading...</span>',Math.random()<.5)return void reqNewSource();var a=new XMLHttpRequest;a.open("GET","/assets/mgr/"+malid+".json"),a.timeout=2e4,a.onloadend=function(){renderSourceSel(a,!0)},a.send()}}function renderSourceSel(e,t=!1){var a,n=gID("sourceSel");if(a=0===adaptID?"https://myanimelist.net/anime/"+malid:"https://myanimelist.net/manga/"+adaptID,200===e.status){var i=JSON.parse(e.responseText),o='<div style="max-width:400px;width:calc(100% - 20px);margin:0 auto;padding-bottom:10px;background-color:#262626;"><div style="text-align:center;font-size:16px;padding:4px 0;background-color:#2f2f2f;margin-bottom:13px;">'+aniData.source+"</div>";if(void 0!==i[0])for(var r=i.length,s=0;s<r;s++){var l=i[s].vol,d=i[s].chap;void 0===l&&(l="?"),void 0===d&&(d="?"),o+=`<div class="sourceSelSub"><img class="mangaThumb" src="${i[s].picture.replace(".com/_r",".com/_m")}">${i[s].title}<br><span class="mangaSubText">Vol: ${l} Chapter: ${d}</span><br><br><a href="${i[s].url}" target="_blank" class="mangaReadBtn"><img src="https://cdn.animixplay.to/s/fav/mangar.png" style="margin-top:-4px"> Read</a></div>`}0!==adaptID&&(o+='<div class="sourceSelSub"><img src="https://cdn.animixplay.to/s/fav/comick.png"> ComicK<br><a href="https://api.comick.app/redirect?mal='+adaptID+"&type=manga&title="+encodeURIComponent(adaptedName)+'" target="_blank">'+adaptedName+"</a></div>"),o+='<div class="sourceSelSub"><br><img src="https://cdn.animixplay.to/s/fav/mal.png"> MyAnimeList<br><a href="'+a+'" target="_blank">'+adaptedName+"</a></div>",o+="</div>",n.dataset.finish="y",n.innerHTML=o}else t?reqNewSource():n.innerHTML='Network error<br><br><a href="#" onClick="showSourceSel()">Retry</a>'}function reqNewSource(){var e=new XMLHttpRequest;e.open("POST","/api/search"),e.timeout=2e4,e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onloadend=function(){renderSourceSel(e,!1)},e.send("manggen="+malid)}function hideSourceSel(e){"sourceSel"===e.target.id&&(gID("sourceSel").style.display="none")}var picLoaded=!1;function showPictures(){if(picLoaded){(e=gID("picViewer")).style.display="block"}else{var e,t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML="#picViewer img{max-width:80%;border:2px solid #cacaca}#picViewer{position:fixed;width:100%;height:100%;z-index:21;top:0;text-align:center;color:white;padding-top:10vh;background-color:#0000008a;overflow-y:auto}",document.head.appendChild(t),(e=document.createElement("div")).setAttribute("id","picViewer"),e.addEventListener("click",hidePic),document.body.appendChild(e),picLoaded=!0}if("y"!==e.dataset.finish){e.innerHTML="Loading...";var a=new XMLHttpRequest;a.open("GET",`https://api.jikan.moe/v4/anime/${malid}/pictures`),a.timeout=3e4,a.onloadend=function(){if(200===this.status){for(var t=JSON.parse(a.responseText),n=t.data.length,i="",o="",r=0;r<n;r++)"string"==typeof(o=t.data[r].jpg.large_image_url)&&(i+=`<img src="${o}"><br><br>`);n<1&&(i="No image"),e.dataset.finish="y",e.innerHTML=i}else e.innerHTML='Network error<br><br><a href="#" onClick="showPictures()">Retry</a>'},a.onerror=function(){e.innerHTML='Network error<br><br><a href="#" onClick="showPictures()">Retry</a>'},a.send()}}function hidePic(e){"IMG"!==e.target.tagName&&(gID("picViewer").style.display="none")}var reportOpened=!1,reportLoaded=!1,recapthcaNotLoaded=!0;function reportError(e=""){if(reportOpened){(t=gID("reportform")).style.animationName="notifout",setTimeout((function(){t.style.display="none",reportOpened=!1}),400)}else{var t;if(reportLoaded)gID("reportform").style.display="block",gID("reportform").style.animationName="notifin",gID("reportinput").value=e;else(t=document.createElement("div")).innerHTML=`<i class="closebtn glyphicon glyphicon-remove" id="reportclose" onclick="reportError()"></i>Report Problem\n            <textarea class="logininput" placeholder="Description" id="reportinput">${e}</textarea>\n            <div class="g-recaptcha" data-theme="dark" data-sitekey="6LfYUUceAAAAAEC5G8ZmQEqELhXx55thJrVKDrew"></div>\n            <div id="statusReport"></div>\n            <div class="changepassbtn" id="sendreportbtn" onClick="sendReport();">Send report</div>`,t.setAttribute("id","reportform"),t.style.cssText="display:block;animation-name:notifin",document.body.appendChild(t),reportLoaded=!0;if(recapthcaNotLoaded){var a=document.createElement("script");a.src="https://www.google.com/recaptcha/api.js",document.body.appendChild(a),recapthcaNotLoaded=!1}reportOpened=!0}}function sendReport(){if("undefined"!=typeof grecaptcha){var e=gID("reportinput").value,t=grecaptcha.getResponse();if(e.length<2)shownotif("Please describe what wrong"),gID("reportinput").style.borderColor="red",setTimeout((function(){gID("reportinput").style.borderColor=""}),2e3);else if(t.length<10)shownotif("Please check the captcha");else{var a=gID("sendreportbtn");a.innerHTML="Sending...",a.setAttribute("OnClick",""),a.style.cursor="default",a.style.opacity="0.5";var n=new XMLHttpRequest;n.open("POST","/a/XsWgdGCnKJfNvDFAM28EV"),n.timeout=11e3,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onloadend=function(){if(200===this.status)a.innerHTML="Success!",a.style.opacity=.5,gID("reportinput").value="",gID("statusReport").innerHTML='<span class="successmsg">Your report has been sent</span>';else{if(isJson(n.responseText))shownotif(JSON.parse(n.responseText).error);else shownotif("Network error");grecaptcha.reset(),a.innerHTML="Send report",a.setAttribute("OnClick","sendReport()"),a.style.cursor="pointer",a.style.opacity="1"}},n.send("recaptcha="+t+"&report="+window.location.pathname+"&description="+e)}}else shownotif("Please wait captcha loading...")}var DISQUSWIDGETS={displayCount:function(e){void 0!==e.counts[0]?gID("showcommentbtn").innerHTML="Show "+e.counts[0].comments+" Comments":gID("showcommentbtn").innerHTML="Show Comments"}},disqmonitor=!1;function showcomment(){var e=document,t=e.createElement("script");t.src="https://animixplay.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t),gID("showcommentbtn").style.display="none";var a=gID("disqus_thread"),n=setInterval((function(){if(a.children.length>1){clearInterval(n);var e=a.children[0];-1===e.src.indexOf("embed/comments")&&a.removeChild(e)}}),50);a.style.minHeight="100px",disqmonitor||(disqmonitor=!0,setInterval((function(){a.children.length>1&&-1===a.children[0].src.indexOf("embed/comments")&&a.removeChild(a.children[0])}),500))}var discordNotOpened=!0;function opendiscord(){}function expandinfo(){var e=gID("infopanel").scrollHeight;return gID("infopanel").style.maxHeight=e.toString()+"px",gID("expandbtn").setAttribute("onClick","reduceinfo()"),document.querySelector("#expandbtn i").classList.remove("glyphicon-menu-down"),document.querySelector("#expandbtn i").classList.add("glyphicon-menu-up"),!1}function reduceinfo(){return gID("infopanel").style.maxHeight="",gID("expandbtn").setAttribute("onClick","expandinfo()"),document.querySelector("#expandbtn i").classList.remove("glyphicon-menu-up"),document.querySelector("#expandbtn i").classList.add("glyphicon-menu-down"),!1}var recomendmenuopen=!1,recomendloaded=!1;function showrecomendmenu(){isMobile()?gID("playerleftsidebar").style.animationName=recomendmenuopen?"moveout2mobilerecomend":"movein2mobilerecomend":gID("playerleftsidebar").style.animationName=recomendmenuopen?"moveout2recomend":"movein2recomend";var e=gID("coverlight");recomendmenuopen?(e.removeEventListener("click",closeSidebar),fadeOut(e)):(recomendloaded||showrecomend(),e.addEventListener("click",closeSidebar),fadeIn(e)),recomendmenuopen=!recomendmenuopen}function closeSidebar(){showrecomendmenu(),reportOpened&&reportError()}function handleAiring(){if(!aniData.status.toLowerCase().includes("finished")){var e=new XMLHttpRequest;e.open("GET","/assets/s/schedule.json"),e.timeout=1e4,e.onload=function(){if(isJson(e.responseText)){var t,a,n=JSON.parse(e.responseText),i=n.length;for(t=0;t<i;t++)if(Number(n[t].malid)===malid){a=n[t].time;break}if(null!=a){for(var o=new Date,r=1e3*(Number(a)+7200)-o;r<-216e5;)r+=6048e5;timeleftLoop(r+=Number(o)),gID("countwrapper").style.display="block"}}},e.send()}}function timeleftLoop(e){var t=new Date,a=e-t;if(a<0)gID("animepagecountdown").innerHTML="New sub: about now";else{var n=Math.floor(a/1e3),i=Math.floor(n/86400);n-=86400*i;var o=Math.floor(n/3600);n-=3600*o;var r=Math.floor(n/60),s="";i>0&&(s+=i+"d "),o>0&&(s+=o+"h "),s+=r+"m ",s+=(n-=60*r)+"s",gID("animepagecountdown").innerHTML="New sub: "+s,setTimeout((function(){timeleftLoop(e)}),1e3)}}var xDown=null,yDown=null,thresold=50;function getTouches(e){return e.touches||e.originalEvent.touches}function handleTouchStart(e){const t=getTouches(e)[0];xDown=t.clientX,yDown=t.clientY}function handleTouchMove(e){if(xDown&&yDown){var t=xDown-e.touches[0].clientX,a=yDown-e.touches[0].clientY;Math.abs(t)<thresold&&Math.abs(a)<thresold||(Math.abs(t)>Math.abs(a)&&(t>0?recomendmenuopen&&showrecomendmenu():recomendmenuopen||showrecomendmenu()),xDown=null,yDown=null)}}function fadeOut(e){e.style.opacity=1,function t(){(e.style.opacity-=.05)<0?e.style.display="none":requestAnimationFrame(t)}()}function fadeIn(e){e.style.opacity=0,e.style.display="block",function t(){var a=parseFloat(e.style.opacity);(a+=.05)>1||(e.style.opacity=a,requestAnimationFrame(t))}()}var notifDisplayed=!1;function shownotif(e,t=1700){var a=setInterval((function(){if(!notifDisplayed){notifDisplayed=!0;var n=gID("notifiaction");n.innerHTML=e,n.style.display="block",n.style.animationName="notifin",setTimeout((function(){n.style.animationName="notifout"}),t+400),setTimeout((function(){n.style.display="none",notifDisplayed=!1}),t+800),clearInterval(a)}}),50)}function searchfocused(){gClass("quicksearchcontainer")[0].style.display="block"}function searchblur(){setTimeout((function(){gClass("quicksearchcontainer")[0].style.display="none"}),300)}function dosearchfromplayer(){var e=gID("q").value;e.length>2?location.href="/?q="+e:shownotif("Keyword too short!")}function cSearch(e){var t=gID("q").value;t.length<3?shownotif("Keyword too short!"):location.href="full"==e?"/?q="+t:"/?q="+t+"&sengine="+e}function movedub(e){return"(dub)"===e.substring(e.length-5).toLowerCase()&&(e="<span class='dubtag'>[Dub]</span> "+e.substring(0,e.length-5)),e}function movedub2(e){var t=e.substring(e.length-5);return e=e.replace("&amp;","&"),"(dub)"===t.toLowerCase()&&(e="<span class='dubtag'>[Dub]</span> "+e.substring(0,e.length-5)),e}var notFoundID={},gID=function(e){var t=document.getElementById(e);return null===t&&(void 0===notFoundID[e]?(t=document.createElement("div"),notFoundID[e]=t):t=notFoundID[e]),t},notFoundClass={},gClass=function(e){var t=document.getElementsByClassName(e);return void 0===t[0]&&(void 0===notFoundClass[e]?(t=[document.createElement("div")],notFoundClass[e]=t):t=notFoundClass[e]),t};function isMobile(){return window.innerWidth<1130}function scrollToTop(e){"scrollBehavior"in document.documentElement.style?window.scrollTo({top:0,behavior:"smooth"}):window.scrollTo(0,0)}window.addEventListener("beforeunload",(function(){gID("loadcontainer").style.display="block"}));var disqus_config=function(){this.page.url=window.location.href,this.page.identifier=window.location.pathname};function backhome(){window.location.href="/"}var searchmobileopen=!1;function togglesearch(){var e=gID("q");searchmobileopen?(gID("showsearchbtn").innerHTML='<i class="glyphicon glyphicon-search"></i>',gClass("webtitle")[0].style.display="",e.style.display="",e.style.maxWidth="",e.value="",gID("searchbox").style.marginLeft=""):(gID("showsearchbtn").innerHTML='<i class="glyphicon glyphicon-remove"></i>',gClass("webtitle")[0].style.display="none",e.style.display="inline",e.style.maxWidth="100%",gID("searchbox").style.marginLeft="30px",e.focus(),scrollToTop(300)),searchmobileopen=!searchmobileopen}function focussearch(){isMobile()?togglesearch():(gID("q").focus(),scrollToTop(300))}function copyToClipboard(e){if("function"==typeof navigator.clipboard.writeText)navigator.clipboard.writeText(e).catch((e=>{console.log(e)}));else{const t=function(t){t.preventDefault(),t.clipboardData.setData("text/plain",e)};document.addEventListener("copy",t),document.execCommand("copy"),document.removeEventListener("copy",t)}}function addCommas(e){e+="";for(var t=/(\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e}function getrequest(e){var t=location.search.split("&"+e+"=")[1];return t||(t=location.search.split("?"+e+"=")[1]),void 0!==t?decodeURIComponent(t.split("&")[0]):null}function escapeHtml(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(function(e){return t[e]}))}function isStorage(e){try{var t=window[e],a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(e){return!1}}function isJson(e){try{JSON.parse(e)}catch(e){return!1}return!0}